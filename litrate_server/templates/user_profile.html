{% extends "layout.html" %}

{% from "includes/_formhelper.html" import render_field %}
{% block head %}
<meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/style.css" >
    <link rel="icon" type="image/vnd.microsoft.icon" href="/static/images/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="/static/menu.js"></script>
    <link type="text/css" rel="stylesheet" href="/static/responsive-tabs.css" />
    <link type="text/css" rel="stylesheet" href="/static/style_o.css" />
    <link rel="stylesheet" type="text/css" href="/static/font-awesome.css" >
    <link rel="stylesheet" type="text/css" href="/static/remodal.css">
    <link rel="stylesheet" type="text/css" href="/static/remodal-default-theme.css">
{% endblock %}
{% block body %}
<style>

input {
	width: 300px;
	font-size: 13px;
	padding: 6px 0 4px 10px;
	border: 1px solid #cecece;
	background: #F6F6f6;
	border-radius: 8px;
}
input {
	padding-bottom: 5px\0;
}
</style>
    <div class="pbody">
        <div class="img_profile">
            <img style="width: 100%; height: 100%;" src="/data/user_{{user.user_id}}/avatar" />
            {% if session.signedin and session.user_id == user.user_id %}
                <input type="button" style="width: 250px; margin: 5px 0 0 0;" onclick=" document.location.href = '{{url_for('edit_info')}}';" value="Редактировать информацию">
            {% elif session.signedin %}
                {% if session.user.user_type == "Creator" and "Publisher" == user.user_type %}
            <input type="button" style="width: 250px; margin: 5px 0 0 0;" onclick=" document.location.href = '{{url_for('send_collection_page',publisher_id=user.user_id)}}';" value="Отправить сборник">
            <input type="button" style="width: 250px; margin: 5px 0 0 0;" onclick=" document.location.href = '{{url_for('send_prose_page',publisher_id=user.user_id)}}';" value="Отправить прозу">
            <br/>
                {% endif %}
                {% if "Creator" == user.user_type %}

                <input type="button" style="width: 250px; margin: 5px 0 0 0;" onclick=" document.location.href = '#modal3';" value="Написать сообщение">
                {% endif %}
            {% endif %}
        </div>
        <div style="float: left;">
            <h1 style="font-size: 30px; padding-left: 20px; color: rgb(0,0,0); font-weight: bold">
                {{user.user_name}} {{user.user_surname}}
                <span>

                </span>
            </h1>
        </div>

        {% block type_profile %}
        {% endblock %}
    </div>



     <div data-remodal-id="modal3" role="dialog" aria-labelledby="modal2Title" aria-describedby="modal2Desc">
         <form method="post">
        <div>
          <h2 id="modal2Title">Отправка сообщения</h2>
          <p id="modal2Desc" style="font-size: 18px;">
                <textarea name="message_text" style="max-width: 400px; max-height: 150px; min-width: 400px; min-height: 150px; " maxlength="249"></textarea>
          </p>
        </div>
        <br>
              <input style="width: 200px; height: 40px; " type="submit" class="remodal-confirm" value="Отправить">
         </form>
     </div>


{% endblock %}

{% block scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<!-- Responsive Tabs JS -->
<script src="/static/jquery.responsiveTabs.js" type="text/javascript"></script>
<script type="text/javascript">



//----------------Вкладки--------------------
	$(document).ready(function () {
		var $tabs = $('#horizontalTab');
		$tabs.responsiveTabs({
			rotate: false,
			startCollapsed: 'accordion',
			collapsible: 'accordion',
			setHash: true,
			disabled: [5],
			click: function(e, tab) {
				$('.info').html('Tab <strong>' + tab.id + '</strong> clicked!');
			},
			activate: function(e, tab) {
				$('.info').html('Tab <strong>' + tab.id + '</strong> activated!');
			},
			activateState: function(e, state) {
				//console.log(state);
				$('.info').html('Switched from <strong>' + state.oldState + '</strong> state to <strong>' + state.newState + '</strong> state!');
			}
		});

		$('#start-rotation').on('click', function() {
			$tabs.responsiveTabs('startRotation', 1000);
		});
		$('#stop-rotation').on('click', function() {
			$tabs.responsiveTabs('stopRotation');
		});
		$('#start-rotation').on('click', function() {
			$tabs.responsiveTabs('active');
		});
		$('#enable-tab').on('click', function() {
			$tabs.responsiveTabs('enable', 3);
		});
		$('#disable-tab').on('click', function() {
			$tabs.responsiveTabs('disable', 3);
		});
		$('.select-tab').on('click', function() {
			$tabs.responsiveTabs('activate', $(this).val());
		});

	});

</script>
{% endblock %}