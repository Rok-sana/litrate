{% extends "layout.html" %}

{% from "includes/_formhelper.html" import render_users_for_search %}

{% block title %}
    <title>Поиск</title>
{% endblock %}

{% block head %}
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/style.css" >
    <link rel="stylesheet" type="text/css" href="/static/font-awesome.css" >
    <link rel="icon" type="image/vnd.microsoft.icon" href="/static/images/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="/static/jquery.matchHeight.js"></script>
    <script src="/static/jquery.selectric.min.js"></script>
    <script src="/static/jquery.min.js"></script>
    <script src="/static/jquery.selectric.js"></script>
    <script src="/static/menu.js"></script>
{% endblock %}

{% block style %}
    <style>
    input {
        width: 300px;
        font-size: 13px;
        padding: 6px 0 4px 10px;
        border: 1px solid #cecece;
        background: #F6F6f6;
        border-radius: 8px;
    }
    input {
        padding-bottom: 5px\0;
    }

    textarea {
        /* = Убираем скролл */
        overflow: auto;

        /* = Убираем увеличение */
        width: 385px;
        height: 100px;
        max-height: 600px;

        /* = Добавим фон, рамку, отступ*/
        background: #f6f6f6;
        border: 1px solid #cecece;
        border-radius: 8px 0 0 0;
        padding: 8px 0 8px 10px;


        ---------------------------
    </style>
{% endblock %}

{% block body %}
    <div style="height: 1450px;" class="pbody">

        <div style="width: 200px; margin: 10px auto; font-size: 28px">
            <p>Поиск по людям</p>
        </div>

        <form method="post">
            <div style="width: 100%; height: 100px">
                <div style="margin: 5px 50px; width: 300px; float: left;">
                    <p><input id="search_input" name="search_string" placeholder="Поиск..." type="text"></p>
                    <div style="float: left; margin-top: 5px;">
                        <input style="width: 145px; height: 40px; margin-right: 10px;" onclick="" type="button" value="Очистить">
                    </div>
                    <div style="margin-top: 5px;">
                        <input style="width: 145px; height: 40px;" type="submit" value="Поиск">
                    </div>
                </div>

                <div style="width: 300px; float: right; margin: 5px 50px;">
                    <div style="height: 40px;">
                        <select name="user_search_type">
                            <option value="">Выберите тип пользователя</option>
                            <option value="all">Все пользователи</option>
                            <option value="creators">Авторы</option>
                            <option value="publishers">Издательства</option>

                        </select>
                     </div>
                    <div style="height: 40px;">
                        <select name="sort_type">
                              <option value="">Выберите как сортировать</option>
                              <option value="by_rating">По рейтингу</option>
                              <option value="by_name">По имени</option>
                              <option value="by_surname">По фамилии</option>
                        </select>
                     </div>
                </div>

            </div>
        </form>
      {{render_users_for_search(users)}}

    </div>
{% endblock %}

{% block scripts %}
    <script src="/static/jquery.min.js"></script>
    <script src="/static/jquery.selectric.js"></script>
    <script>
          $(function(){
              $('select, .select').selectric();
          });


          $("#search_input").keyup(function(event){
              if(event.keyCode == 13){
                  console.log(this.value);
                  document.location.href = "/search/user/name=" + this.value;
              }
          });

          function DropDown(el) {
				this.dd = el;
				this.initEvents();
			}
			DropDown.prototype = {
				initEvents : function() {
					var obj = this;

					obj.dd.on('click', function(event){
						$(this).toggleClass('active');
						event.stopPropagation();
					});
				}
			}

			$(function() {

				var dd = new DropDown( $('#dd') );

				$(document).click(function() {
					// all dropdowns
					$('.wrapper-dropdown-5').removeClass('active');
				});

			});
    </script>
{% endblock %}


